<!doctype html>
<html lang="pt-br">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>CRUD</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  </head>
  <body>

	<div class="container">
		<h1 class="text-center my-4">Pessoas</h1>
	
		<form th:action="@{/pessoas}" method="get" class="my-3">
	        <div class="row g-3">
	            <div class="col-md-4">
	                <label for="nome" class="form-label">Nome</label>
	                <input type="text" name="nome" class="form-control" id="nome" placeholder="Nome...">
	            </div>
	            <div class="col-md-4">
	                <label for="cpf" class="form-label">CPF</label>
	                <input type="text" name="cpf" class="form-control" id="cpf" placeholder="CPF...">
	            </div>
	            <div class="col-md-4">
	                <label for="status" class="form-label">Status</label>
	                <select name="status" class="form-select" id="status">
	                    <option value="">Todos</option>
	                    <option value="1">Ativo</option>
	                    <option value="0">Inativo</option>
	                </select>
	            </div>
	            <div class="col-md-12">
	                <button type="submit" class="btn btn-primary">Pesquisar</button>
	            </div>
	        </div>
    	</form>
			
		<table class="table">
			<thead>
				<tr>
					<th>ID</th>
					<th>CPF</th>
					<th>Dt. Cadastro</th>
					<th>Dt. Ult. Modificação</th>
					<th>E-mail</th>
					<th>Nome</th>
					<th>Telefone</th>
					<th>Situação</th>
					<th>Ação</th>
				<tr>
			</thead>
			<tbody>
				<tr th:each="pessoa : ${pessoa}">
					<td th:text="${pessoa.id}"></td>
					<td th:text="${pessoa.pes_cpf}"></td>
					<td th:text="${#dates.format(pessoa.pes_dt_cadastro, 'dd-MM-yyyy HH:mm:ss')}"></td>
					<td th:text="${pessoa.getPes_dt_ult_modificacao_formatada()}"></td>
					<td th:text="${pessoa.pes_email}"></td>
					<td th:text="${pessoa.pes_nome}"></td>
					<td th:text="${pessoa.pes_telefone}"></td>
					<td th:text="${pessoa.status == 0 ? 'Inativo' : 'Ativo'}"></td>
				
					<td style="white-space:nowrap">
						<a class="btn btn-primary btn-sm"
							th:href="@{/pessoas/edit(id=${pessoa.id})}">Editar</a>
						<a class="btn btn-danger btn-sm"
							th:href="@{/pessoas/delete(id=${pessoa.id})}"
							onclick="Tem certeza que deseja deletar ?">Deletar</a>
					</td>
				 </tr>						
			</tbody>
		</table>
		    <a class="btn btn-primary float-end" href="/pessoas/create">Cadastrar Pessoa</a>

	</div>



    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
  </body>
</html>